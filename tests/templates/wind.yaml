out_keys:
  mars.expver: '9078'
members: 5
parameters:
  - target: fileset:wind_{step}_{stream}.grib
    param:
      operation: wind_speed
    defs:
      base_keys: &base_keys
        class: od
        domain: g
        expver: '0001'
        levtype: sfc
        param: [165, 166]
        date: 20230914
        time: 12
      base_interp: &base_interp
        grid: O640
        intgrid: none
        legendre-loader: shmem
        matrix-loader: file-io
    sources:
      fdb:
        fc:
          - <<: *base_keys
            stream: enfo
            type: pf
            interpolate: *base_interp
          - <<: *base_keys
            stream: enfo
            type: cf
            interpolate: *base_interp
    windows:
      include_start_step: true
      grib_set:
        indicatorOfParameter: 207
        gribTablesVersionNo: 128
        bitsPerValue: 16
      ranges:
        - [0, 6, 3]
  - target: fileset:wind_{step}_{type}.grib
    param:
      operation: wind_speed
    defs:
      base_keys: &vod2uv_base_keys
        class: od
        domain: g
        expver: '0001'
        levtype: pl
        param: [138, 155]
        stream: enfo
        levelist: [250, 850]
        date: 20230914
        time: 12
      base_interp: &vod2uv_base_interp
        vod2uv: "1"
        grid: O640
        intgrid: none
        legendre-loader: shmem
        matrix-loader: file-io
    sources:
      fdb:
        fc:
          - <<: *vod2uv_base_keys
            type: cf
            interpolate: *vod2uv_base_interp
          - <<: *vod2uv_base_keys
            type: pf
            interpolate: *vod2uv_base_interp  
    windows:
      include_start_step: true
      grib_set:
        gribTablesVersionNo: 128
        indicatorOfParameter: 10
        bitsPerValue: 24
      ranges:
        - [0, 6, 3]
    ensemble:
      operation: ensms