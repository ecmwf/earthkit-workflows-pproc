out_keys:
  mars.expver: 9078
  type: ep
  localDefinitionNumber: 5
  bitsPerValue: 8
members: 5
parameters:
  t850:
    targets: 
      out_prob: "fdb:"
    steps:
      - interval: 12
        start_step: 120
        end_step: 168 
    windows:
      - periods:
          - range: [120, 120]
          - range: [168, 168]
        thresholds:
          - out_paramid: 131022
            comparison: "<"
            value: -8
          - out_paramid: 131023
            comparison: "<"
            value: -4
        grib_set:
          bitsPerValue: 24
      - periods:
          - range: [120, 168]
        window_operation: 'mean'
        include_start_step: true
        thresholds:
          - out_paramid: 131020
            comparison: "<"
            value: -2
          - out_paramid: 131021
            comparison: ">="
            value: 2
        grib_set:
          bitsPerValue: 24
      - std_anomaly: True
        periods:
          - range: [120, 120]
          - range: [132, 132]
          - range: [168, 168]
        thresholds:
          - out_paramid: 133093
            comparison: '>'
            value: 1
          - out_paramid: 133094
            comparison: '>'
            value: 1.5
        grib_set:
          localDefinitionNumber: 30
          bitsPerValue: 24
          edition: 2
          typeOfGeneratingProcess: 5
          paramId: 0
          timeIncrement: 12
          indicatorOfUnitForTimeIncrement: 1
          typeOfStatisticalProcessing: 10
          packingType: "grid_ccsds"
          scaleFactorOfUpperLimit: 'MISSING'
          scaledValueOfUpperLimit: 'MISSING'
    defs:
      base_keys: &base_keys
        class: 'od'
        levelist: 850
        levtype: 'pl'  
        domain: g 
        param: 130
        expver: '0001'
      base_interp: &base_interp
        grid: 'O640'
        intgrid: none
        legendre-loader: shmem
        matrix-loader: file-io
    sources:
      fdb:
        ens:
          - <<: *base_keys
            stream: 'enfo'
            type: cf
            date: 20230914
            time: 12
            interpolate: *base_interp
          - <<: *base_keys
            stream: 'enfo'
            type: pf 
            date: 20230914
            time: 12
            interpolate: *base_interp
        clim:
          <<: *base_keys
          stream: 'efhs'
          type: [em, es]
          date: 20230914
          time: 00
          interpolate: *base_interp
          step:
            120: 132
            132: 144
            144: 156
            156: 168
            168: 180
            180: 192
            192: 204
            204: 216
            216: 228
            228: 240
            240: 252